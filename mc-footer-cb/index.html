<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>BBYO Master Footer – Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; margin: 16px; }
    .row { display:flex; gap:12px; margin-bottom:12px; align-items:center; }
    label { min-width:140px; font-weight:600; }
    select { padding:8px; font-size:14px; }
    .hint { color:#666; font-size:12px; margin: 2px 0 0 140px; }
    .card { border:1px solid #e2e2e2; border-radius:10px; padding:12px; margin-top:12px; }
    .preview { border:1px dashed #c8c8c8; border-radius:10px; padding:12px; margin-top:8px; }
    code { background:#f7f7f7; padding:2px 6px; border-radius:6px; }
  </style>
</head>
<body>
  <h2>BBYO Master Footer</h2>

  <!-- Data you can extend (copy from your XLSX tabs) -->
  <script>
    // Brand color name → hex. Extend with values from your “Brand Colors” tab.
    const COLORS = {
      "Black": "#000000",
      "Centennial Blue": "#1a03b5",
      "Lox": "#e42158",
      "Jaffa": "#f8450a",
      "Sunrise": "#f8f90a",
      "Pistachio": "#6bbd00",
      "Seltzer": "#00d7eb"
    };

    // Variant → link set. Replace with links from your sheet.
    const LINK_SETS = {
      "General": {
        "logo": "https://www.bbyo.org",
        "facebook": "https://www.facebook.com/BBYOInsider",
        "instagram": "https://www.instagram.com/bbyoinsider",
        "snapchat": "https://www.snapchat.com/add/bbyoinsider",
        "linkedin": "https://www.linkedin.com/company/bbyo",
        "tiktok": "https://www.tiktok.com/@bbyoinsider",
        "youtube": "https://www.youtube.com/user/BBYOtube",
        "x": "https://x.com/BBYOInsider"
      },
      "Alumni": {
        "logo": "https://alumni.bbyo.org",
        "facebook": "https://www.facebook.com/BBYOInsider",
        "instagram": "https://www.instagram.com/bbyoalumni/",
        "snapchat": "https://www.snapchat.com/add/bbyoinsider",
        "linkedin": "https://www.linkedin.com/company/bbyo",
        "tiktok": "https://www.tiktok.com/@bbyoinsider",
        "youtube": "https://www.youtube.com/user/BBYOtube",
        "x": "https://x.com/BBYOInsider"
      },
      "Passport": {
        "logo": "https://www.bbyo.org",
        "facebook": "https://www.facebook.com/bbyopassport",
        "instagram": "https://www.instagram.com/bbyopassport",
        "snapchat": "https://www.snapchat.com/add/bbyoinsider",
        "linkedin": "https://www.linkedin.com/company/bbyo",
        "tiktok": "https://www.tiktok.com/@bbyoinsider",
        "youtube": "https://www.youtube.com/user/BBYOtube",
        "x": "https://x.com/BBYOInsider"
      }
    };

    // Default selections
    const DEFAULT_COLOR = "BrandBlue";
    const DEFAULT_VARIANT = "General";
  </script>

  <div class="row">
    <label for="variant">Footer Variant</label>
    <select id="variant"></select>
  </div>
  <p class="hint">Choose <em>General</em>, <em>Alumni</em>, or <em>Passport</em> (updates all links).</p>

  <div class="row">
    <label for="color">Brand Color</label>
    <select id="color"></select>
  </div>
  <p class="hint">Sets the color of inline SVGs (modern clients). Outlook for Windows uses blue PNG fallbacks.</p>

  <div class="card">
    <strong>Current links (read-only)</strong>
    <div class="preview" id="linksPreview"></div>
  </div>

  <script>
    // --- Block SDK glue ---
    // Minimal postMessage API used by the SFMC editor container
    const sdk = {
      post: (type, payload) => parent.postMessage({ type, payload }, "*")
    };

    // Populate selects
    const variantSel = document.getElementById('variant');
    const colorSel = document.getElementById('color');

    Object.keys(LINK_SETS).forEach(v => {
      const opt = document.createElement('option');
      opt.value = v; opt.textContent = v;
      variantSel.appendChild(opt);
    });

    Object.entries(COLORS).forEach(([name, hex]) => {
      const opt = document.createElement('option');
      opt.value = name; opt.textContent = `${name} (${hex})`;
      colorSel.appendChild(opt);
    });

    // Load initial state from container
    window.addEventListener("message", (e) => {
      const { type, payload } = e.data || {};
      if (type === "load") {
        const state = payload?.state || {};
        variantSel.value = state.variant || DEFAULT_VARIANT;
        colorSel.value = state.colorName || DEFAULT_COLOR;
        renderLinksPreview();
      }
    });

    // helper: show the active links
    function renderLinksPreview() {
      const v = variantSel.value;
      const s = LINK_SETS[v] || LINK_SETS[DEFAULT_VARIANT];
      const el = document.getElementById('linksPreview');
      el.innerHTML = `
        <div><code>logo</code>: ${s.logo}</div>
        <div><code>facebook</code>: ${s.facebook}</div>
        <div><code>instagram</code>: ${s.instagram}</div>
        <div><code>snapchat</code>: ${s.snapchat}</div>
        <div><code>linkedin</code>: ${s.linkedin}</div>
        <div><code>tiktok</code>: ${s.tiktok}</div>
        <div><code>youtube</code>: ${s.youtube}</div>
        <div><code>x</code>: ${s.x}</div>
      `;
    }

    function save() {
      const colorName = colorSel.value;
      const colorHex = COLORS[colorName] || COLORS[DEFAULT_COLOR];
      const variant = variantSel.value;
      const links = LINK_SETS[variant] || LINK_SETS[DEFAULT_VARIANT];

      sdk.post("save", {
        state: {
          colorName,
          colorHex,
          variant,
          links
        }
      });
    }

    // Events
    variantSel.addEventListener('change', () => { renderLinksPreview(); save(); });
    colorSel.addEventListener('change', () => { save(); });

    // Request initial data
    sdk.post("ready", {});
  </script>
</body>
</html>
